{"version":3,"file":"base.js","sourceRoot":"","sources":["base.ts"],"names":[],"mappings":"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","sourcesContent":["import * as ts from \"typescript\";\n\nimport * as path from \"path\";\nimport * as fs from \"fs\";\n\nimport { Options } from \"../\";\nimport { getConfigFileName, parseJSON } from \"../utils\";\n\ninterface TsfmtSettings {\n    insertSpaceAfterCommaDelimiter?: boolean;\n    insertSpaceAfterSemicolonInForStatements?: boolean;\n    insertSpaceBeforeAndAfterBinaryOperators?: boolean;\n    insertSpaceAfterConstructor?: boolean;\n    insertSpaceAfterKeywordsInControlFlowStatements?: boolean;\n    insertSpaceAfterFunctionKeywordForAnonymousFunctions?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces?: boolean;\n    insertSpaceAfterTypeAssertion?: boolean;\n    insertSpaceBeforeFunctionParenthesis?: boolean;\n    placeOpenBraceOnNewLineForFunctions?: boolean;\n    placeOpenBraceOnNewLineForControlBlocks?: boolean;\n    insertSpaceBeforeTypeAnnotation?: boolean;\n    baseIndentSize?: number;\n    indentSize?: number;\n    // 0, 1, 2 or None, Block, Smart\n    indentStyle?: number | string;\n    tabSize?: number;\n    newLineCharacter?: string;\n    convertTabsToSpaces?: boolean;\n}\n\nexport function makeFormatCodeOptions(fileName: string, opts: Options, formatSettings: ts.FormatCodeSettings): ts.FormatCodeSettings {\n    let baseDir = opts.baseDir ? path.resolve(opts.baseDir) : path.dirname(path.resolve(fileName));\n    let configFileName: string | null;\n    if (opts.tsfmtFile && path.isAbsolute(opts.tsfmtFile)) {\n        configFileName = opts.tsfmtFile;\n    } else {\n        configFileName = getConfigFileName(baseDir, opts.tsfmtFile || \"tsfmt.json\");\n    }\n    if (!configFileName) {\n        return formatSettings;\n    }\n\n    if (opts.verbose) {\n        console.log(`read ${configFileName} for ${fileName}`);\n    }\n\n    let config: TsfmtSettings = parseJSON(fs.readFileSync(configFileName, \"utf-8\"));\n    if (typeof config.insertSpaceAfterCommaDelimiter === \"boolean\") {\n        formatSettings.insertSpaceAfterCommaDelimiter = config.insertSpaceAfterCommaDelimiter;\n    }\n    if (typeof config.insertSpaceAfterSemicolonInForStatements === \"boolean\") {\n        formatSettings.insertSpaceAfterSemicolonInForStatements = config.insertSpaceAfterSemicolonInForStatements;\n    }\n    if (typeof config.insertSpaceBeforeAndAfterBinaryOperators === \"boolean\") {\n        formatSettings.insertSpaceBeforeAndAfterBinaryOperators = config.insertSpaceBeforeAndAfterBinaryOperators;\n    }\n    if (typeof config.insertSpaceAfterConstructor === \"boolean\") {\n        formatSettings.insertSpaceAfterConstructor = config.insertSpaceAfterConstructor;\n    }\n    if (typeof config.insertSpaceAfterKeywordsInControlFlowStatements === \"boolean\") {\n        formatSettings.insertSpaceAfterKeywordsInControlFlowStatements = config.insertSpaceAfterKeywordsInControlFlowStatements;\n    }\n    if (typeof config.insertSpaceAfterFunctionKeywordForAnonymousFunctions === \"boolean\") {\n        formatSettings.insertSpaceAfterFunctionKeywordForAnonymousFunctions = config.insertSpaceAfterFunctionKeywordForAnonymousFunctions;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces = config.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces = config.insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces;\n    }\n    if (typeof config.insertSpaceAfterTypeAssertion === \"boolean\") {\n        formatSettings.insertSpaceAfterTypeAssertion = config.insertSpaceAfterTypeAssertion;\n    }\n    if (typeof config.insertSpaceBeforeFunctionParenthesis === \"boolean\") {\n        formatSettings.insertSpaceBeforeFunctionParenthesis = config.insertSpaceBeforeFunctionParenthesis;\n    }\n    if (typeof config.placeOpenBraceOnNewLineForFunctions === \"boolean\") {\n        formatSettings.placeOpenBraceOnNewLineForFunctions = config.placeOpenBraceOnNewLineForFunctions;\n    }\n    if (typeof config.placeOpenBraceOnNewLineForControlBlocks === \"boolean\") {\n        formatSettings.placeOpenBraceOnNewLineForControlBlocks = config.placeOpenBraceOnNewLineForControlBlocks;\n    }\n    if (typeof config.insertSpaceBeforeTypeAnnotation === \"boolean\") {\n        formatSettings.insertSpaceBeforeTypeAnnotation = config.insertSpaceBeforeTypeAnnotation;\n    }\n    if (typeof config.baseIndentSize === \"number\") {\n        formatSettings.baseIndentSize = config.baseIndentSize;\n    }\n    if (typeof config.indentSize === \"number\") {\n        formatSettings.indentSize = config.indentSize;\n    }\n    if (typeof config.indentStyle === \"number\") {\n        formatSettings.indentStyle = config.indentStyle as number;\n    } else if (typeof config.indentStyle === \"string\") {\n        formatSettings.indentStyle = (ts.IndentStyle as any)[config.indentStyle] as number;\n    }\n    if (typeof config.tabSize === \"number\") {\n        formatSettings.tabSize = config.tabSize;\n    }\n    if (typeof config.newLineCharacter === \"string\") {\n        formatSettings.newLineCharacter = config.newLineCharacter;\n    }\n    if (typeof config.convertTabsToSpaces === \"boolean\") {\n        formatSettings.convertTabsToSpaces = config.convertTabsToSpaces;\n    }\n\n    return formatSettings;\n}\n"]}